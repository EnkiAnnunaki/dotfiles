function _export_op_token() {
  local varname=$1
  echo "Fetching ${varname}..."
  eval "${varname}=$(op --cache get item $varname --vault Private --fields credential)"
  export $varname
}

function setup_gitlab_secrets() {
  eval $(op signin gitlab)

  _export_op_token GITLAB_COM_TOKEN
  _export_op_token GITLAB_STAGING_TOKEN
  _export_op_token GITLAB_GDK_TOKEN
  echo 'Done'

  op signout
  unset OP_SESSION_gitlab
}

